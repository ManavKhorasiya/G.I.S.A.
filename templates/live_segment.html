{% extends 'base.html' %}
<!DOCTYPE html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8"> 
    <title>Welcome to GISA</title> 
    <!-- <style>
        #my_image {
            display: none;
        }
    </style> -->
</head> 
<body>
    {% block body_block %} 
    <form method = "post" enctype="multipart/form-data"> 
        {% csrf_token %} 
        {{ form.as_p }} 
        <input type="Submit" name="submit" value="Submit"/>
    </form> 
    {% if not submitbutton %}
    <img src = "{% url 'gisa:live_segment_temp' %}" alt="original image" id = "my_image">
    {% endif %}
    <div class = "slidecontainer">
        <label for="output_hue_lower" class="slider_label "> Hue lower: </label><br>
        <label for="output_saturation_lower" class="slider_label "> Saturation lower: </label><br>
        <label for="output_value_lower" class="slider_label "> Value lower: </label><br>
        <label for="output_hue_higher" class="slider_label "> Hue higher: </label><br>
        <label for="output_saturation_higher" class="slider_label "> Saturation higher: </label><br>
        <label for="output_value_higher" class="slider_label "> Value higher: </label><br>
    </div>
    <div class="col-8 ">
        <span id="output_hue_lower" class="slider_output"></span>
        <input type="range" min="0" max="255" value="0" class="slider" id="hue_lower"/> <br>


        <span id="output_saturation_lower" class="slider_output"></span>
        <input type="range" min="0" max="255" value="0" class="slider" id="saturation_lower"/> <br>


        <span id="output_value_lower" class="slider_output"></span>
        <input type="range" min="0" max="255" value="0" class="slider" id="value_lower"/> <br>
        

        <span id="output_hue_higher" class="slider_output"></span>
        <input type="range" min="0" max="255" value="255" class="slider" id="hue_higher"/> <br>


        <span id="output_saturation_higher" class="slider_output"></span>
        <input type="range" min="0" max="255" value="255" class="slider" id="saturation_higher"/> <br>


        <span id="output_value_higher" class="slider_output"></span>
        <input type="range" min="0" max="255" value="255" class="slider" id="value_higher"/> <br>
    </div>

    <!-- <div style="border: 1px solid black; background-color:palegreen; margin-top: 50px; background-color: rgba(0,0,0,0.3);background-blend-mode: lighten !important" class="jumbotron">
        <form method = "POST">
            {% csrf_token %}
            {{ temp_form.as_p }}
            <input type = "submit" name="do_predict" value="Predict">
        </form>
        {% if prediction %} -->
        <!-- <img src = "{{ predicted_image.uploads.url }}" alt="original image"> -->
        <!-- <img src = "{{ predicted_image.uploads.url }}" alt="predicted image" style = "float:left">          commment this line -->
        <!-- <p>This is {{ prediction }} </p>
        {% endif %}>
    </div> -->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script type="text/javascript">

//     function refreshImage(imgElement,imgURL){       
//    // create a new timestamp    
//     var timestamp = new Date().getTime();        
//     var el = document.getElementById(imgElement);      
//     var queryString = "?t=" + timestamp;           
//     el.src = imgURL + queryString;  
//   }
        var hue_lower = document.getElementById("hue_lower").value;
        var saturation_lower = document.getElementById("saturation_lower").value;
        var value_lower = document.getElementById("value_lower").value;

        var hue_higher = document.getElementById("hue_higher").value;
        var saturation_higher = document.getElementById("saturation_higher").value;
        var value_higher = document.getElementById("value_higher").value;

        var output_hue_lower = document.getElementById("output_hue_lower");
        var output_saturation_lower = document.getElementById("output_saturation_lower").value;
        var output_value_lower = document.getElementById("output_value_lower").value;

        var output_hue_higher = document.getElementById("output_hue_higher").value;
        var output_saturation_higher = document.getElementById("output_saturation_higher").value;
        var output_value_higher = document.getElementById("output_value_higher").value;

        // if(hue_lower != null ) {
        //     output_hue_lower.innerHTML = hue_lower.value; 
        //     output_saturation_lower.innerHTML = saturation_lower.value; 
        //     output_value_lower.innerHTML = value_lower.value; 


        //     output_hue_higher.innerHTML = hue_higher.value; 
        //     output_saturation_higher.innerHTML = saturation_higher.value; 
        //     output_value_higher.innerHTML = value_higher.value; 

        //     hue_lower.oninput = function () {
        //         output_hue_lower.innerHTML = this.value;
        //     }

        //     saturation_lower.oninput = function () {
        //         output_saturation_lower.innerHTML = this.value;
        //     }

        //     value_lower.oninput = function () {
        //         output_value_lower.innerHTML = this.value;
        //     }

        //     hue_higher.oninput = function () {
        //         output_hue_higher.innerHTML = this.value;
        //     }

        //     saturation_higher.oninput = function () {
        //         output_saturation_higher.innerHTML = this.value;
        //     }

        //     value_higher.oninput = function () {
        //         output_value_higher.innerHTML = this.value;
        //     }

        //     $('.slider').on("input", function () {
        //         var data_out = {
        //             "H_l" : $("#hue_lower").val(),
        //             "S_l" : $("#saturation_lower").val(),
        //             "V_l" : $("#value_lower").val(),

        //             "H_h" : $("hue_higher").val(),
        //             "S_h" : $("#saturation_higher").val(),
        //             "V_h" : $("value_higher").val()
        //         }

        //         console.log(data_out)

        //         $.ajax({
        //             method : 'GET',
        //             url : '{% url "gisa:segment_live" %}',
        //             data : data_out,
        //             datatype : 'json',
        //             success : function() {
        //                 console.log('Slider value sent success');
        //             },
        //             error : function() {
        //                 console.log("Error during ajax post");
        //             }
        //         });

        //     });

        // };
            $('.slider').on("input", function () {
            var data_out = {
                "H_l" : hue_lower,
                "S_l" : saturation_lower,
                "V_l" : value_lower,

                "H_h" : hue_higher,
                "S_h" : saturation_higher,
                "V_h" : value_higher
            }

            console.log(data_out)

            $.ajax({
                method : 'GET',
                url : '{% url "gisa:segment_live" %}',
                data : data_out,
                datatype : 'json',
                success : function() {
                    console.log('Slider value sent success');
                },
                error : function() {
                    console.log("Error during ajax post");
                }
            });
        }
</script>
// <!-- <script type = "text/javascript" src = "../main.js"></script> -->
{% endblock %}
</body> 
</html> 
